# =============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Quant Analytics Platform
# =============================================================================

# =============================================================================
# Application Settings
# =============================================================================
ENVIRONMENT=production
DEBUG=false
PROJECT_NAME="Quant Analytics Platform"
VERSION="1.0.0"
API_V1_PREFIX="/api/v1"

# =============================================================================
# Security
# =============================================================================
# IMPORTANT: Generate a new SECRET_KEY for production
# Run: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=wR33Elo9wMAOIOHxyToVy8RE7c83SFuW6J0kfeY_jMo

# Token expiration (in minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_MINUTES=10080  # 7 days

# CORS Settings
CORS_ORIGINS=["https://yourdomain.com"]
ALLOWED_HOSTS=["yourdomain.com", "www.yourdomain.com"]

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
POSTGRES_USER=quant_user
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_123!@#
POSTGRES_DB=quant_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# Redis
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Redis ML (for ML result caching)
REDIS_ML_HOST=redis-ml
REDIS_ML_PORT=6379
REDIS_ML_DB=0
REDIS_ML_URL=redis://${REDIS_ML_HOST}:${REDIS_ML_PORT}/${REDIS_ML_DB}

# Cache TTL (seconds)
CACHE_TTL_SHORT=300      # 5 minutes
CACHE_TTL_MEDIUM=1800    # 30 minutes
CACHE_TTL_LONG=3600      # 1 hour

# =============================================================================
# Celery (Background Tasks)
# =============================================================================
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_ALWAYS_EAGER=false
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=3600

# =============================================================================
# MLflow
# =============================================================================
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_S3_ENDPOINT_URL=http://minio:9000
MLFLOW_EXPERIMENT_NAME="quant-analytics"

# =============================================================================
# MinIO (S3-Compatible Storage)
# =============================================================================
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=CHANGE_THIS_MINIO_PASSWORD_123!@#
MINIO_ENDPOINT=minio:9000
MINIO_BUCKET=mlflow
MINIO_SECURE=false

AWS_ACCESS_KEY_ID=${MINIO_ROOT_USER}
AWS_SECRET_ACCESS_KEY=${MINIO_ROOT_PASSWORD}
AWS_S3_ENDPOINT=${MINIO_ENDPOINT}

# =============================================================================
# Email Configuration (Optional)
# =============================================================================
# SMTP Settings (e.g., Gmail, SendGrid SMTP relay)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=${SMTP_USER}
SMTP_FROM_NAME="Quant Analytics Platform"
SMTP_TLS=true

# SendGrid API (alternative to SMTP)
# SENDGRID_API_KEY=your-sendgrid-api-key

# AWS SES (alternative)
# AWS_REGION=us-east-1
# AWS_SES_ACCESS_KEY=your-access-key
# AWS_SES_SECRET_KEY=your-secret-key

# Mailgun (alternative)
# MAILGUN_API_KEY=your-mailgun-api-key
# MAILGUN_DOMAIN=mg.yourdomain.com

# =============================================================================
# Market Data Providers (Optional)
# =============================================================================
# Yahoo Finance (free, no key required)
USE_YAHOO_FINANCE=true

# Alpha Vantage
# ALPHA_VANTAGE_API_KEY=your-alpha-vantage-key

# Polygon.io
# POLYGON_API_KEY=your-polygon-key

# IEX Cloud
# IEX_API_KEY=your-iex-key

# =============================================================================
# AI Providers (Optional)
# =============================================================================
# OpenAI
# OPENAI_API_KEY=your-openai-key
# OPENAI_MODEL=gpt-4

# OpenRouter
# OPENROUTER_API_KEY=your-openrouter-key

# HuggingFace
# HUGGINGFACE_API_KEY=your-huggingface-key

# DeepSeek
# DEEPSEEK_API_KEY=your-deepseek-key

# Google Gemini
# GOOGLE_API_KEY=your-google-key

# =============================================================================
# Monitoring & Logging
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log
LOG_MAX_SIZE=100  # MB
LOG_BACKUP_COUNT=10

# Sentry (Error Tracking)
# SENTRY_DSN=your-sentry-dsn
# SENTRY_ENVIRONMENT=production
# SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# =============================================================================
# Performance & Scaling
# =============================================================================
WORKERS=4
MAX_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=5
TIMEOUT=60

# Async Settings
ASYNC_POOL_SIZE=100
ASYNC_MAX_OVERFLOW=20

# =============================================================================
# Feature Flags
# =============================================================================
ENABLE_API_DOCS=true
ENABLE_METRICS=true
ENABLE_PROFILING=false
ENABLE_CACHE=true
ENABLE_RATE_LIMITING=true
ENABLE_CORS=true

# =============================================================================
# Backup Settings
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=quant-backups

# =============================================================================
# Development/Debug (Production: Keep disabled)
# =============================================================================
RELOAD=false
ENABLE_DEV_ROUTES=false
SQLALCHEMY_ECHO=false
